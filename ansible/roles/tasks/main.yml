
    - name: Install aptitude
      apt: pkg=aptitude update_cache=yes
      become: yes

    - name: Apt update/upgrade
      apt: upgrade=yes update_cache=yes
      become: yes

    - name: Install tmux terminal multiplexer
      apt: pkg=tmux
      become: yes

    - name: Install required packages
      apt: pkg={{ item }}
      become: yes
      with_items:
      - automake
      - autoconf
      - pkg-config
      - libcurl4-openssl-dev
      - libjansson-dev
      - libssl-dev
      - libgmp-dev

    - name: Download CUDA repository .deb
      get_url: url=http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64/cuda-repo-ubuntu1604_8.0.61-1_amd64.deb dest=/tmp/cuda-repo-ubuntu1604_8.0.61-1_amd64.deb
      register: get_deb_result
      until: get_deb_result | succeeded
      retries: 3
      delay: 1

    - name: Install CUDA repository
      apt: deb=/tmp/cuda-repo-ubuntu1604_8.0.61-1_amd64.deb
      become: yes

    - name: Install CUDA
      apt: pkg=cuda update_cache=yes
      become: yes

    - name: Get veriumMiner
      git: repo=https://github.com/effectsToCause/veriumMiner dest=~/veriumMiner

    - name: autogen
      command: ./autogen.sh chdir=~/veriumMiner

    - name: configure
      command: ./configure CFLAGS="-march=native" --with-crypto --with-curl chdir=~/veriumMiner

    - name: make
      command: make chdir=~/veriumMiner
